# /review 命令

对代码变更进行审查。

## 使用方式

```text
/review                    # 审查当前 staged 变更
/review [file_path]        # 审查指定文件
/review --staged           # 审查 staged 变更
/review --last-commit      # 审查最后一次 commit
```

## 审查清单

### 代码质量

- [ ] 是否遵循项目命名规范 (PascalCase/snake_case)
- [ ] 是否使用 Pydantic 模型而非裸字典
- [ ] 是否包含完整的类型注解
- [ ] 是否有适当的错误处理

### 异步安全

- [ ] 所有 async 函数是否正确 await
- [ ] 数据库连接是否在 context manager 中使用
- [ ] 是否有潜在的死锁或竞态条件

### 测试覆盖

- [ ] 是否有对应的单元测试
- [ ] 测试是否覆盖边界情况
- [ ] Mock 是否正确设置

### 安全检查

- [ ] 是否有硬编码的敏感信息
- [ ] SQL 是否使用参数化查询
- [ ] API 输入是否有验证

## 输出格式

```markdown
## 审查结果

### 发现的问题

1. [严重性] 文件:行号 - 问题描述
   建议修复: ...

### 改进建议

1. ...

### 总体评价

...
```
